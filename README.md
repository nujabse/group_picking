# 扫码组队（6/7 人一组，共 44 人）

一个在局域网内使用的“扫码入场、自动分组”的小应用：
- 前端：原生 HTML/CSS/JS + qrcode.js（生成二维码）
- 后端：Node.js（原生 http），实时更新用 Server‑Sent Events（SSE）
- 存储：本地 JSON 文件（`data/state.json`）

无需安装依赖，直接运行即可。

## 功能
- 进入首页自动显示本页 URL 的二维码（同网段同学扫码即可访问）
- 学生提交姓名后，自动分配到人数上限为 6 或 7 的小组
- 学生可在学生页主动选择加入某个小组（若该组已满则需更换其他组）；也支持自动分配（教师页）
- 小组实时显示与更新（无需刷新）
- 支持清空重置（可选简易口令）

分组策略：总人数为 44，按 2 组×7 人 + 5 组×6 人的容量初始化，共 7 组。
学生页支持“自主选择加入某组”；若不指定组（或在教师页提交），则按“剩余容量优先”自动分配。

## 启动
1. 安装 Node.js（18+ 推荐）
2. 运行服务：
   ```bash
   node server.js
   ```
3. 教师端浏览器打开终端提示的地址（例如 `http://localhost:3000`），将首页的“二维码”展示给学生。
4. 学生扫码后会进入专用的学生页面（`/join`），该页面不再显示二维码，只包含加入/撤销和分组信息。

提示：若学生设备与教师设备在同一局域网，手机扫码时会自动使用教师机的局域网 IP（例如 `http://192.168.x.x:3000`）。

## 重置
- 首页右侧“重置所有分组”按钮
- 可输入口令，默认口令为 `teacher`，也可留空（演示环境方便使用）。

## 目录结构
- `server.js`：HTTP 服务、路由、SSE 推送与持久化
- `public/`：前端资源
  - `index.html`：页面结构
  - `styles.css`：样式
  - `app.js`：教师端逻辑（二维码 + 看板）
  - `join.html`：学生端页面（无二维码）
  - `student.js`：学生端逻辑（选择加入/撤销 + 看板）
  - `lib/qrcode.min.js`：二维码生成库
- `data/state.json`：分组数据（运行时生成）

## 自定义
- 修改总人数与分组容量：见 `server.js` 顶部的 `TOTAL_STUDENTS` 与 `CAPACITIES` 常量。
- 更复杂的分配策略：修改 `assignToGroup()`。
- 学生撤销加入：前端会调用 `POST /leave`，如需权限控制可自行增强鉴权。

## 备注
- 本项目使用 SSE 实现实时更新，不依赖第三方包；若需要切换到 Socket.IO，也可按需替换前后端实现。
- 首次运行会在 `data/` 目录下生成 `state.json`，进程内存与文件会保持同步。
